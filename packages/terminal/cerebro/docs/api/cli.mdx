# API: CLI

The main CLI class for creating and managing command-line applications.

## Creating a CLI Instance

### Constructor

```typescript
new Cerebro(name: string, options?: CliOptions)
```

**Parameters:**

- `name` - The CLI application name
- `options` - Optional configuration

**Example:**

```typescript
import { Cerebro } from "@visulima/cerebro";

const cli = new Cerebro("my-app", {
    packageName: "my-app",
    packageVersion: "1.0.0",
    cwd: process.cwd(),
    logger: console,
    argv: process.argv.slice(2),
});
```

### Factory Function

```typescript
import { createCerebro } from "@visulima/cerebro";

const cli = createCerebro("my-app", {
    packageName: "my-app",
    packageVersion: "1.0.0",
});
```

## CliOptions

```typescript
interface CliOptions<T extends Console = Console> {
    argv?: ReadonlyArray<string>;
    cwd?: string;
    logger?: T;
    packageName?: string;
    packageVersion?: string;
}
```

## Methods

### addCommand()

Add a command to the CLI:

```typescript
cli.addCommand(command: Command): this
```

**Example:**

```typescript
cli.addCommand({
    name: "build",
    description: "Build the project",
    execute: ({ logger }) => {
        logger.info("Building...");
    },
});
```

### addPlugin()

Add a plugin to extend functionality:

```typescript
cli.addPlugin(plugin: Plugin): this
```

**Example:**

```typescript
cli.addPlugin({
    name: "my-plugin",
    execute: (toolbox) => {
        toolbox.myFeature = () => {};
    },
});
```

### run()

Run the CLI application:

```typescript
cli.run(options?: CliRunOptions): Promise<void>
```

**Options:**

```typescript
interface CliRunOptions {
    shouldExitProcess?: boolean; // Default: true
    autoDispose?: boolean; // Default: true
    [key: string]: any; // Additional options
}
```

**Example:**

```typescript
await cli.run({
    shouldExitProcess: false, // Don't exit process
    autoDispose: false, // Don't cleanup
});
```

### runCommand()

Execute a command programmatically:

```typescript
cli.runCommand(commandName: string, options?: RunCommandOptions): Promise<unknown>
```

**Options:**

```typescript
interface RunCommandOptions {
    argv?: string[];
    [key: string]: any;
}
```

**Example:**

```typescript
await runtime.runCommand("build", {
    argv: ["--production"],
});
```

### setDefaultCommand()

Set the default command when none is provided:

```typescript
cli.setDefaultCommand(commandName: string): this
```

**Example:**

```typescript
cli.setDefaultCommand("help");
```

### setCommandSection()

Configure help output:

```typescript
cli.setCommandSection(section: CommandSection): this
```

**Example:**

```typescript
cli.setCommandSection({
    header: "My CLI v1.0.0",
    footer: "Visit https://example.com for more info",
});
```

### getCliName()

Get the CLI application name:

```typescript
cli.getCliName(): string
```

### getCommands()

Get all registered commands:

```typescript
cli.getCommands(): Map<string, Command>
```

### getCwd()

Get the current working directory:

```typescript
cli.getCwd(): string
```

### getPackageName()

Get the package name:

```typescript
cli.getPackageName(): string | undefined
```

### getPackageVersion()

Get the package version:

```typescript
cli.getPackageVersion(): string | undefined
```

### getPluginManager()

Get the plugin manager instance:

```typescript
cli.getPluginManager(): PluginManager
```

### dispose()

Clean up resources:

```typescript
cli.dispose(): void
```

## Complete Example

```typescript
import { Cerebro } from "@visulima/cerebro";

const cli = new Cerebro("my-app", {
    packageName: "my-app",
    packageVersion: "1.0.0",
});

cli.setCommandSection({
    header: "My Awesome CLI v1.0.0",
});

cli.setDefaultCommand("help");

cli.addCommand({
    name: "hello",
    execute: ({ logger }) => {
        logger.info("Hello!");
    },
});

await cli.run();
```
