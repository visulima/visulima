version: "3.7"

services:
    db:
        image: "postgres:18.0-alpine@sha256:f898ac406e1a9e05115cc2efcb3c3abb3a92a4c0263f3b6f6aaae354cbb1953a"
        volumes:
            - "data:/var/lib/postgresql/data"
        ports:
            - "5432:5432"

    redis:
        image: "redis:8.4.0-alpine@sha256:6cbef353e480a8a6e7f10ec545f13d7d3fa85a212cdcc5ffaf5a1c818b9d3798"
        ports:
            - "6379:6379"

    mailhog:
        image: "mailhog/mailhog:v1.0.1@sha256:8d76a3d4ffa32a3661311944007a415332c4bb855657f4f6c57996405c009bea"
        ports:
            - "1025:1025"
            - "8025:8025"
        volumes:
            - "data:/data"
        env_file: "./visulima/.env.local"
        depends_on:
            - "db"
        restart: "always"

volumes:
    data: # yamllint disable-line rule:empty-values
